---
import { format } from 'date-fns';

interface Props {
  title: string;
  description: string;
  publishDate: Date;
  updateDate?: Date;
  url: string;
  tags?: string[];
}

const { title, description, publishDate, updateDate, url, tags } = Astro.props;
---

<article class="group py-6 border-b border-gray-200 dark:border-gray-800 last:border-b-0">
  <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-3">
    <a href={url} class="block">
      <h3 class="text-lg font-semibold text-garden-primary dark:text-garden-dark-primary group-hover:text-garden-accent dark:group-hover:text-garden-dark-accent transition-colors font-ui">
        {title}
      </h3>
    </a>
    <time
      datetime={publishDate.toISOString()}
      class="text-sm text-garden-secondary dark:text-garden-dark-secondary font-ui shrink-0"
    >
      {format(publishDate, 'MMM d, yyyy')}
    </time>
  </div>

  <p class="text-garden-secondary dark:text-garden-dark-secondary font-body mb-3 leading-relaxed">{description}</p>

  {tags && tags.length > 0 && (
    <div class="flex flex-wrap gap-2">
      {tags.slice(0, 3).map(tag => (
        <a
          href={`/tag/${tag}`}
          class="text-xs font-medium text-garden-secondary dark:text-garden-dark-secondary hover:text-garden-accent dark:hover:text-garden-dark-accent transition-colors font-ui"
        >
          #{tag}
        </a>
      ))}
      {tags.length > 3 && (
        <span class="text-xs text-gray-400 dark:text-gray-600 font-ui">
          +{tags.length - 3} more
        </span>
      )}
    </div>
  )}
</article>